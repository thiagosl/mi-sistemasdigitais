module reg_bank (inpA, inpB, inpC, clk, control, data, outA, outB);

	input [3:0] inpA, inpB, inpC;
	input clk;
	input [1:0] control;
	input [31:0] data;
	output reg [31:0] outA, outB;
	reg [31:0] regBank[15:0], temp;
	
	always @(posedge clk) begin
		case (control)
			2'b01: regBank[inpC] = data;
			2'b10: begin 
				temp = regBank[inpC];
				regBank[inpC] = {temp[31:16], data[15:0]};
			end
			2'b11: begin
				temp = regBank[inpC];
				regBank[inpC] = {data[15:0], temp[15:0]};
			end
		endcase
	end
	always @(negedge clk) begin
		case (control)
			2'b01: outA = regBank[inpA];
			2'b01: outB = regBank[inpB];
		endcase
	end

endmodule


module reg_bank_tb;

	reg [3:0] inpA, inpB, inpC;
	reg clk;
	reg [1:0] control;
	reg [31:0] data;
	wire [31:0] outA, outB;

	reg_bank DUT(inpA, inpB, inpC, clk, control, data, outA, outB);

	initial begin
		inpA = 4'b0101;
		inpB = 4'b0011;
		inpC = 4'b0100;
		control = 2'b01;
		inp = 6'b010101;
		#20;
		inp = 6'b111111;
		#20;
		control = 0;
		inp = 6'b000000;
		#20;
		inp = 6'b101010;
		#20;
		$finish;
	end

	always #5 clk = ~clk;

endmodule
